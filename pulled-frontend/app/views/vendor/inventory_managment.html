<div class="vendor-container" id="inventory-summary">
  <div class="container-fluid">
    <div class="vendor-container-header clearfix">
      <button data-target="#inventoryModal" ng-click="newProduct()" data-toggle="modal" class="btn btn-default btn-custom add-item-to-inventory">
        <i class="fa fa-plus"></i>&nbsp;Add item to Inventory
      </button>
    </div>
    <div ng-repeat="inventory_item in inventory" class="categories-collapse panel-group" aria-multiselectable="true">
      <div class="panel panel-default">

        <div class="panel-heading" role="tab">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-target="#category-collapse-1" aria-expanded="true">
              <span class="collapse-arrow"></span>
                {{inventory_item.inventory.category.name}}
            </a>
          </h4>
        </div>

        <div id="category-collapse-1" class="panel-collapse collapse in">
          <div class="panel-body">

            <div ng-repeat="sub_category in inventory_item.inventory.sub_categories" class="subcategories-collapse panel-group" role="tablist" aria-multiselectable="true">
              <div class="panel panel-default">
                <div class="panel-heading" role="tab">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" data-target="#subcategories-collapse-1" aria-expanded="true" aria-controls="subcategories-collapse-1">
                      <span class="collapse-arrow"></span>
                      {{sub_category.name}}
                    </a>
                  </h4>
                </div>
                <div id="subcategories-collapse-1" class="panel-collapse collapse in" role="tabpanel">
                  <div class="panel-body panel-without-padding">
                    <table class="green-table green-border mobile-card-table">
                      <thead>
                        <tr>
                          <th>Status</th>
                          <th>SKU <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>Product Descripion <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>Date Created <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>Last Modified <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>Available <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>SubCategories <i class="fa fa-angle-down hidden-xs"></i></th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="vendor_variant in sub_category.vendor_variants">
                          <td>{{vendor_variant.status}}</td>
                          <td>{{vendor_variant.sku}}</td>
                          <td>
                            <div class="row">
                              <div class="product-image col-xs-4">
                                <img ng-src="{{vendor_variant.img}}"/>
                              </div>
                              <div class="product-desc col-xs-8">
                                ID: {{vendor_variant.id}}<br>{{vendor_variant.manufacturer}}<br>{{vendor_variant.price}}
                              </div>
                            </div>
                          </td>
                          <td>{{vendor_variant.created_at}}</td>
                          <td>{{vendor_variant.updated_at}}</td>
                          <td>{{vendor_variant.stock}}</td>
                          <td>
                            <span ng-repeat="secondarySubcategory in vendor_variant.sub_categories" class="label label-default secondary-subcategory">{{secondarySubcategory.name}}</span>
                          </td>
                          <td>
                            <button class="btn btn-primary add-item-to-inventory" ng-click="editProduct(vendor_variant)" data-target="#inventoryModal" data-toggle="modal">
                              <span>Edit&nbsp;</span><i class="fa fa-pencil"></i>
                            </button>
                            <button class="btn btn-warning add-item-to-inventory">
                              <span>Delete&nbsp;</span><i class="fa fa-times"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div> <!-- .subcategories-collapse -->
          </div>
        </div>
      </div>
    </div> <!-- .categories-collapse -->
  </div>
</div>

<!-- Add Item to Inventory  -->
  <div class="modal fade" id="inventoryModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <img type="button" class="close" data-dismiss="modal" aria-label="Close" src="img/modal_close.png"></img>
          <h4 class="modal-title">{{modalTitle}}</h4>
        </div>

        <form>
          <div class="modal-body">
            <div class="row search-wrapper" ng-hide="disableSearch">
              <div class="col-xs-4">
                <label>Search Product:</label>
              </div>
              <div class="col-xs-8">
               <input class="form-control" >
              </div>
            </div>
            <div class="form-group variant-info">
              <img class="variant-img" ng-src="{{item.img}}">
              <p class="variant-info-title">Category</p>
              <p class="variant-info-result">{{item.category}}</p>
              <p class="variant-info-title">SubCategories</p>
              <p class="variant-info-result">{{getSubCategories(item)}}</p>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>Manofacturer:</label>
              </div>
              <div class="col-xs-5">
               <input class="form-control" ng-model="item.manufacturer" >
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>ID:</label>
              </div>
              <div class="col-xs-5">
               <input class="form-control" ng-model="item.id">
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>SKU:</label>
              </div>
              <div class="col-xs-5">
               <input class="form-control" ng-model="item.sku">
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>Main Sub category:</label>
              </div>
              <div class="col-xs-5">
               <select class="form-control" ng-options="subCategory.id as subCategory.name for subCategory in item.sub_categories"  ng-model="item.main_subcategory.id">
                 <option value ="" disabled>Select main subcategory</option>
               </select>
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>Price:</label>
              </div>
              <div class="col-xs-5">
                <input class="form-control" ng-model="item.price">
              </div>
              <div class="col-xs-3">
                <select class="form-control" ng-options="unit for unit in item.possible_units" ng-model="item.unit">
                  <option value ="" disabled> Unit</option>
                </select>
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>Stock:</label>
              </div>
              <div class="col-xs-5">
                <input class="form-control" ng-model="item.stock">
              </div>
              <div class="col-xs-3 unit">
                {{item.unit}}
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3">
                <label>Status:</label>
              </div>
              <div class="col-xs-5">
               <select class="form-control"  ng-model="item.status" ng-class="{active_status: (item.status == 'Active'), inactive_status: (item.status == 'Inactive')}">
                 <option value ="" disabled>Select status</option>
                 <option class="active_status">Active</option>
                 <option class="inactive_status">Inactive</option>
               </select>
              </div>
            </div>
            <div class="row variant-field">
              <div class="col-xs-3 col-xs-offset-9">
                <button class="btn btn-default btn-custom">Add Item</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
